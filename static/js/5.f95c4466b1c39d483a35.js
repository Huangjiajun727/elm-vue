webpackJsonp([5],{AIol:function(t,s){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTA4MCAyNjEiPjxkZWZzPjxwYXRoIGlkPSJiIiBkPSJNMCAwaDEwODB2MjYwSDB6Ii8+PGZpbHRlciBpZD0iYSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgeD0iLTUwJSIgeT0iLTUwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij48ZmVPZmZzZXQgZHk9Ii0xIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggaW49InNoYWRvd09mZnNldE91dGVyMSIgdmFsdWVzPSIwIDAgMCAwIDAuOTMzMzMzMzMzIDAgMCAwIDAgMC45MzMzMzMzMzMgMCAwIDAgMCAwLjkzMzMzMzMzMyAwIDAgMCAxIDAiLz48L2ZpbHRlcj48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIj48dXNlIGZpbGw9IiMwMDAiIGZpbHRlcj0idXJsKCNhKSIgeGxpbms6aHJlZj0iI2IiLz48dXNlIGZpbGw9IiNGRkYiIHhsaW5rOmhyZWY9IiNiIi8+PHBhdGggZmlsbD0iI0Y2RjZGNiIgZD0iTTIzMCA0NGg1MzN2NDZIMjMweiIvPjxyZWN0IHdpZHRoPSIxNzIiIGhlaWdodD0iMTcyIiB4PSIzMCIgeT0iNDQiIGZpbGw9IiNGNkY2RjYiIHJ4PSI0Ii8+PHBhdGggZmlsbD0iI0Y2RjZGNiIgZD0iTTIzMCAxMThoMzY5djMwSDIzMHpNMjMwIDE4MmgzMjN2MzBIMjMwek04MTIgMTE1aDIzOHYzOUg4MTJ6TTgwOCAxODRoMjQydjMwSDgwOHpNOTE3IDQ4aDEzM3YzN0g5MTd6Ii8+PC9nPjwvc3ZnPg=="},NVtm:function(t,s){},"RA/b":function(t,s,e){"use strict";var a=e("Xxa5"),i=e.n(a),r=e("Gu7T"),o=e.n(r),n=e("exGp"),c=e.n(n),l=e("Dd8w"),d=e.n(l),u=e("NYxO"),p=e("i84Q"),v=e("yclV"),_=e("we8T"),h=e("44dg"),y=e("4Kwa"),g={data:function(){return{offset:0,shopListArr:[],showLoading:!0,showBackStatus:!1,touchend:!1,preventRepeatReuqest:!1,imgBaseUrl:"//elm.cangdu.org/img/"}},components:{loading:h.a,ratingStar:y.a},mixins:[_.b,_.a],props:["geohash","restaurantCategoryId","restaurantCategoryIds","sortByType","deliveryMode","supportIds","confirmSelect"],computed:d()({},Object(u.d)(["latitude","longitude"])),mounted:function(){this.initData()},methods:{initData:function(){var t=this;return c()(i.a.mark(function s(){var e;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(p.L)(t.latitude,t.longitude,t.offset,t.restaurantCategoryId);case 2:e=s.sent,t.shopListArr=[].concat(o()(e)),e.length<20&&(t.touchend=!0),t.hideLoading(),Object(v.f)(function(s){t.showBackStatus=s});case 7:case"end":return s.stop()}},s,t)}))()},loaderMore:function(){var t=this;return c()(i.a.mark(function s(){var e;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!t.touchend){s.next=2;break}return s.abrupt("return");case 2:if(!t.preventRepeatReuqest){s.next=4;break}return s.abrupt("return");case 4:return t.showLoading=!0,t.preventRepeatReuqest=!0,t.offset+=20,s.next=9,Object(p.L)(t.latitude,t.longitude,t.offset,t.restaurantCategoryId);case 9:if(e=s.sent,t.hideLoading(),t.shopListArr=[].concat(o()(t.shopListArr),o()(e)),!(e.length<20)){s.next=15;break}return t.touchend=!0,s.abrupt("return");case 15:t.preventRepeatReuqest=!1;case 16:case"end":return s.stop()}},s,t)}))()},hideLoading:function(){this.showLoading=!1},backTop:function(){Object(v.a)(document.body,{scrollTop:"0"},400,"ease-out")},zhunshi:function(t){var s=void 0;return t instanceof Array&&t.length?t.forEach(function(t){"准"===t.icon_name&&(s=!0)}):s=!1,s},listenPropChange:function(){var t=this;return c()(i.a.mark(function s(){var e;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.showLoading=!0,t.offset=0,s.next=4,Object(p.L)(t.latitude,t.longitude,t.offset,"",t.restaurantCategoryIds,t.sortByType,t.deliveryMode,t.supportIds);case 4:e=s.sent,t.shopListArr=[].concat(o()(e)),t.hideLoading();case 7:case"end":return s.stop()}},s,t)}))()}},watch:{restaurantCategoryIds:function(t){this.listenPropChange()},sortByType:function(t){this.listenPropChange()},confirmSelect:function(t){this.listenPropChange()}}},m={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shoplist-con"},[t.shopListArr.length?a("ul",{directives:[{name:"load-more",rawName:"v-load-more",value:t.loaderMore,expression:"loaderMore"}],staticClass:"shoplist-wrapper",attrs:{type:"1"}},t._l(t.shopListArr,function(s,e){return a("router-link",{key:s.id,staticClass:"shop-li",attrs:{tag:"li",to:{path:"shop",query:{geohash:t.geohash,id:s.id}}}},[a("section",{staticClass:"shop-li-lt"},[a("img",{staticClass:"shop-li-img",attrs:{src:t.imgBaseUrl+s.image_path,alt:"shop-img"}})]),t._v(" "),a("section",{staticClass:"shop-li-rt"},[a("header",{staticClass:"shop-detail-header fl"},[a("h4",{staticClass:"ellipsis shop-title",class:s.is_premium?"premium":""},[t._v(t._s(s.name))]),t._v(" "),a("ul",{staticClass:"shop-detail-ul"},t._l(s.supports,function(s){return a("li",{key:s.id,staticClass:"shop-supports"},[t._v(t._s(s.icon_name))])}),0)]),t._v(" "),a("div",{staticClass:"rating-delivery-left fl"},[a("section",{staticClass:"rating_section fl"},[a("div",{staticClass:"rating-box"},[a("rating-star",{attrs:{rating:s.rating}}),t._v(" "),a("span",{staticClass:"rating-num"},[t._v(t._s(s.rating))])],1),t._v(" "),a("span",{staticClass:"order-box"},[t._v("\n            月售"+t._s(s.recent_order_num)+"单\n            ")])]),t._v(" "),a("section",{staticClass:"rating-delivery-right"},[s.delivery_mode?a("span",{staticClass:"delivery-style delivery-left"},[t._v(t._s(s.delivery_mode.text))]):t._e(),t._v(" "),t.zhunshi(s.supports)?a("span",{staticClass:"delivery-style delivery-right"},[t._v("准时达")]):t._e()])]),t._v(" "),a("footer",{staticClass:"fee-distance fl"},[a("p",{staticClass:"fee"},[t._v("\n            ¥"+t._s(s.float_minimum_order_amount)+"起送"),a("span",{staticClass:"segmentation"},[t._v("/")]),t._v(t._s(s.piecewise_agent_fee.tips)+"\n          ")]),t._v(" "),a("p",{staticClass:"distance-time"},[Number(s.distance)?a("span",[t._v("\n              "+t._s(s.distance>1e3?(s.distance/1e3).toFixed(2)+"km":s.distance+"m")+"\n              "),a("span",{staticClass:"segmentation"},[t._v("/")])]):a("span",[t._v(t._s(s.distance))]),t._v(" "),a("span",{staticClass:"segmentation"},[t._v("/")]),t._v(" "),a("span",{staticClass:"order-time"},[t._v(t._s(s.order_lead_time))])])])])])}),1):a("ul",{staticClass:"fake-shop"},t._l(10,function(t){return a("li",{key:t,staticClass:"fake-shop-li"},[a("img",{staticClass:"fake-shop-svg",attrs:{src:e("AIol"),alt:"shop-fake"}})])}),0),t._v(" "),t.touchend?a("p",{staticClass:"empty-data"},[t._v("没有更多了")]):t._e(),t._v(" "),t.showBackStatus?a("aside",{staticClass:"return_top",on:{click:t.backTop}},[a("span",{staticClass:"return_top-btn"},[t._v("顶部")])]):t._e(),t._v(" "),a("transition",{attrs:{name:"loading"}},[a("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]})],1)],1)},staticRenderFns:[]};var f=e("VU/8")(g,m,!1,function(t){e("NVtm")},"data-v-9940274a",null);s.a=f.exports},fHOz:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("Xxa5"),i=e.n(a),r=e("exGp"),o=e.n(r),n=e("Dd8w"),c=e.n(n),l=e("NYxO"),d=e("ra3+"),u=e("RA/b"),p=e("we8T"),v=e("i84Q"),_={data:function(){return{headTitle:"",foodTitle:"",sortBy:"",geohash:"",restaurant_category_id:"",restaurant_category_ids:"",sortByType:null,Delivery:null,Activity:null,delivery_mode:null,confirmStatus:!1,support_ids:[],category:null,categoryDetail:null,filterNum:0}},mixins:[p.a],computed:c()({},Object(l.d)(["latitude","longitude"])),components:{headTop:d.a,shopList:u.a},created:function(){this.initData()},methods:c()({},Object(l.c)(["RECORD_ADDRESS"]),{initData:function(){var t=this;return o()(i.a.mark(function s(){var e;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.geohash=t.$route.query.geohash,t.headTitle=t.$route.query.title,t.foodTitle=t.headTitle,t.restaurant_category_id=t.$route.query.restaurant_category_id,t.latitude){s.next=9;break}return s.next=7,Object(v.y)(t.geohash);case 7:e=s.sent,t.RECORD_ADDRESS(e);case 9:return s.next=11,Object(v.k)(t.latitude,t.longitude);case 11:return t.category=s.sent,t.category.forEach(function(s){t.restaurant_category_id==s.id&&(t.categoryDetail=s.sub_categories)}),s.next=15,Object(v.l)(t.latitude,t.longitude);case 15:return t.Delivery=s.sent,console.log(t.Delivery),s.next=19,Object(v.j)(t.latitude,t.longitude);case 19:t.Activity=s.sent,t.Activity.forEach(function(s,e){t.support_ids[e]={status:!1,id:s.id}});case 21:case"end":return s.stop()}},s,t)}))()},chooseType:function(t){var s=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s.sortBy!==t?(s.sortBy=t,s.foodTitle="food"==t?"分类":s.headTitle):(s.sortBy="","food"==t&&(s.foodTitle=s.headTitle));case 1:case"end":return e.stop()}},e,s)}))()},selectCategoryName:function(t,s){0==s?(this.restaurant_category_ids="",this.sortBy=""):(this.restaurant_category_id=t,this.categoryDetail=this.category[s].sub_categories)},getCategoryIds:function(t,s){this.sortBy="",this.restaurant_category_ids=t,this.headTitle=this.foodTitle=s},sortList:function(t){var s=void 0;s="P"!==t.target.nodeName.toUpperCase()?t.target.parentNode:t.target,this.sortBy="",this.sortByType=s.getAttribute("data")},selectDeliveryMode:function(t){null==this.delivery_mode?(this.filterNum++,this.delivery_mode=t,console.log(this.Delivery.id)):this.delivery_mode==t?(console.log(2),this.filterNum--,this.delivery_mode=null):this.delivery_mode=t},selectSupportIds:function(t,s){var e=this;this.support_ids.splice(t,1,{status:!this.support_ids[t].status,id:s}),this.filterNum=null==this.delivery_mode?0:1,this.support_ids.forEach(function(t){t.status&&e.filterNum++})},clearSelect:function(){this.support_ids.map(function(t){return t.status=!1}),this.delivery_mode=null,this.filterNum=0},confirmSelectFun:function(){this.confirmStatus=!this.confirmStatus,this.sortBy=""}})},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"food-con"},[e("head-top",{attrs:{"head-title":t.headTitle,goBack:"true"}}),t._v(" "),e("ul",{staticClass:"sort-con"},[e("li",{staticClass:"sort-item",class:{"choose-type":"food"==t.sortBy}},[e("nav",{staticClass:"sort-item-con",on:{click:function(s){t.chooseType("food")}}},[e("div",{staticClass:"sort-item-border"},[e("span",{class:{"category-title":"food"==t.sortBy}},[t._v(t._s(t.foodTitle))]),t._v(" "),e("span",{staticClass:"sort-icon"})])]),t._v(" "),e("transition",{directives:[{name:"show",rawName:"v-show",value:t.category,expression:"category"}],attrs:{name:"showlist"}},[e("section",{directives:[{name:"show",rawName:"v-show",value:"food"==t.sortBy,expression:"sortBy == 'food'"}],staticClass:"category-con sort-detail-type"},[e("div",{staticClass:"category-left"},[e("ul",t._l(t.category,function(s,a){return e("li",{key:a,staticClass:"category-left-li",class:{"category-active":t.restaurant_category_id==s.id},on:{click:function(e){t.selectCategoryName(s.id,a)}}},[e("div",[a?e("img",{attrs:{src:t.getImgPath(s.image_url),alt:"logo"}}):t._e(),t._v(" "),e("span",[t._v(t._s(s.name))])]),t._v(" "),e("div",[e("span",{staticClass:"category-count"},[t._v(t._s(s.count))]),t._v(" "),a?e("span",{staticClass:"category-arrow"}):t._e()])])}),0)]),t._v(" "),e("div",{staticClass:"category-right"},[e("ul",t._l(t.categoryDetail,function(s,a){return a?e("li",{key:a,staticClass:"category-right-li",class:{"category-right-choosed":t.restaurant_category_ids==s.id||!t.restaurant_category_ids&&0==a},on:{click:function(e){t.getCategoryIds(s.id,s.name)}}},[e("span",[t._v(t._s(s.name))]),t._v(" "),e("span",[t._v(t._s(s.count))])]):t._e()}),0)])])])],1),t._v(" "),e("li",{staticClass:"sort-item",class:{"choose-type":"sort"==t.sortBy}},[e("nav",{staticClass:"sort-item-con",on:{click:function(s){t.chooseType("sort")}}},[e("div",{staticClass:"sort-item-border"},[e("span",{class:{"category-title":"sort"==t.sortBy}},[t._v("排序")]),t._v(" "),e("span",{staticClass:"sort-icon"})])]),t._v(" "),e("transition",{attrs:{name:"showlist"}},[e("section",{directives:[{name:"show",rawName:"v-show",value:"sort"==t.sortBy,expression:"sortBy == 'sort'"}],staticClass:"sort-detail-type"},[e("ul",{staticClass:"sort-list-con",on:{click:function(s){t.sortList(s)}}},[e("li",{staticClass:"sort-list-li"},[e("span",{staticClass:"default sort-btn-head"}),t._v(" "),e("p",{class:{"sort-select":0==t.sortByType},attrs:{data:"0"}},[e("span",[t._v("智能排序")]),t._v(" "),0==t.sortByType?e("span",{staticClass:"selected"}):t._e()])]),t._v(" "),e("li",{staticClass:"sort-list-li"},[e("span",{staticClass:"distance sort-btn-head"}),t._v(" "),e("p",{class:{"sort-select":5==t.sortByType},attrs:{data:"5"}},[e("span",[t._v("距离最近")]),t._v(" "),5==t.sortByType?e("span",{staticClass:"selected"}):t._e()])]),t._v(" "),e("li",{staticClass:"sort-list-li"},[e("span",{staticClass:"hot sort-btn-head"}),t._v(" "),e("p",{class:{"sort-select":6==t.sortByType},attrs:{data:"6"}},[e("span",[t._v("销量最高")]),t._v(" "),6==t.sortByType?e("span",{staticClass:"selected"}):t._e()])]),t._v(" "),e("li",{staticClass:"sort-list-li"},[e("span",{staticClass:"price sort-btn-head"}),t._v(" "),e("p",{class:{"sort-select":1==t.sortByType},attrs:{data:"1"}},[e("span",[t._v("起送价最低")]),t._v(" "),1==t.sortByType?e("span",{staticClass:"selected"}):t._e()])]),t._v(" "),e("li",{staticClass:"sort-list-li"},[e("span",{staticClass:"speed sort-btn-head"}),t._v(" "),e("p",{class:{"sort-select":2==t.sortByType},attrs:{data:"2"}},[e("span",[t._v("配送速度最快")]),t._v(" "),2==t.sortByType?e("span",{staticClass:"selected"}):t._e()])]),t._v(" "),e("li",{staticClass:"sort-list-li"},[e("span",{staticClass:"rating sort-btn-head"}),t._v(" "),e("p",{class:{"sort-select":3==t.sortByType},attrs:{data:"3"}},[e("span",[t._v("评分最高")]),t._v(" "),3==t.sortByType?e("span",{staticClass:"selected"}):t._e()])])])])])],1),t._v(" "),e("li",{staticClass:"sort-item",class:{"choose-type":"activity"==t.sortBy}},[e("nav",{staticClass:"sort-item-con",on:{click:function(s){t.chooseType("activity")}}},[e("div",{staticClass:"sort-item-border sort-item-last"},[e("span",{class:{"category-title":"activity"==t.sortBy}},[t._v("筛选")]),t._v(" "),e("span",{staticClass:"sort-icon"})])]),t._v(" "),e("transition",{attrs:{name:"showlist"}},[e("section",{directives:[{name:"show",rawName:"v-show",value:"activity"==t.sortBy,expression:"sortBy == 'activity'"}],staticClass:"sort-detail-type filter-con"},[e("div",[e("header",{staticClass:"filter-header-style"},[t._v("配送方式")]),t._v(" "),e("ul",{staticClass:"filter-ul"},t._l(t.Delivery,function(s,a){return e("li",{key:a,staticClass:"filter-li",on:{click:function(s){t.selectDeliveryMode(1)}}},[e("span",{staticClass:"fengniao",class:{selected:s.id=t.delivery_mode},style:{opacity:0==s.id&&0!==t.delivery_mode?0:1}}),t._v(" "),e("em",{class:{"selected-filter":1==t.delivery_mode}},[t._v(t._s(s.text))])])}),0)]),t._v(" "),e("div",[e("header",{staticClass:"filter-header-style"},[t._v("商家属性（可以多选）")]),t._v(" "),e("ul",{staticClass:"filter-ul filter-ul-last"},t._l(t.Activity,function(s,a){return e("li",{key:a,staticClass:"filter-li",on:{click:function(e){t.selectSupportIds(a,s.id)}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.support_ids[a].status,expression:"support_ids[index].status"}],staticClass:"selected"}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.support_ids[a].status,expression:"!support_ids[index].status"}],staticClass:"filter-icon",style:{color:"#"+s.icon_color,borderColor:"#"+s.icon_color}},[t._v(t._s(s.icon_name))]),t._v(" "),e("em",{class:{"selected-filter":t.support_ids[a].status}},[t._v(t._s(s.name))])])}),0)]),t._v(" "),e("footer",[e("div",{staticClass:"clear-all filter-button-style",on:{click:t.clearSelect}},[t._v("清空")]),t._v(" "),e("div",{staticClass:"confirm-select filter-button-style",on:{click:t.confirmSelectFun}},[t._v("确定"),e("span",{directives:[{name:"show",rawName:"v-show",value:t.filterNum,expression:"filterNum"}]},[t._v("("+t._s(t.filterNum)+")")])])])])])],1)]),t._v(" "),e("transition",{attrs:{name:"showcover"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.sortBy,expression:"sortBy"}],staticClass:"back-cover"})]),t._v(" "),e("section",{staticClass:"shop-list-con"},[t.latitude?e("shop-list",{attrs:{geohash:t.geohash,restaurantCategoryId:t.restaurant_category_id,restaurantCategoryIds:t.restaurant_category_ids,sortByType:t.sortByType,deliveryMode:t.delivery_mode,confirmSelect:t.confirmStatus,supportIds:t.support_ids}}):t._e()],1)],1)},staticRenderFns:[]};var y=e("VU/8")(_,h,!1,function(t){e("odJr")},"data-v-c348db3a",null);s.default=y.exports},odJr:function(t,s){}});
//# sourceMappingURL=5.f95c4466b1c39d483a35.js.map