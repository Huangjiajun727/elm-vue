{"version":3,"sources":["webpack:///src/page/confirmOrder/children/payment.vue","webpack:///./src/page/confirmOrder/children/payment.vue?3239","webpack:///./src/page/confirmOrder/children/payment.vue"],"names":["payment","data","payDetail","showAlert","alertText","payWay","countNum","gotoOrders","components","headTop","head","alertTip","created","this","initData","shopid","CLEAR_CART","mounted","remainingTime","beforeDestroy","clearInterval","timer","props","computed","extends_default","Object","vuex_esm","remaining","minute","parseInt","second","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","getData","orderMessage","order_id","userInfo","user_id","sent","message","abrupt","stop","_this2","setInterval","confrimPay","closeTipFun","$router","push","children_payment","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","head-title","go-back","_v","_s","cartPrice","toFixed","resultData","orderInfo","orderAmount","_e","_m","class","choosed","on","click","$event","closeTip","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/23.f65aff34345c0b51c665.js","sourcesContent":["<template>\n  <div class=\"rating_page\">\n    <head-top head-title=\"在线支付\" go-back='true'></head-top>\n    <section class=\"show_time_amount\">\n      <section>\n        <header class=\"time_last\">支付剩余时间</header>\n        <p class=\"time\">{{remaining}}</p>\n        <footer class=\"order_detail\" v-if=\"payDetail.resultData\">\n          <span>详情</span>\n          <span>¥ {{cartPrice&&cartPrice.toFixed(2) || payDetail.resultData.orderInfo.orderAmount&&(payDetail.resultData.orderInfo.orderAmount/100).toFixed(2)}}</span>\n        </footer>\n      </section>\n    </section>\n    <div class=\"pay_way\">选择支付方式</div>\n    <section class=\"pay_way_list\">\n      <section class=\"pay_item\">\n        <div class=\"pay_icon_contaienr\">\n          <span class=\"zhifubao pay_icon\"></span>\n          <span>支付宝</span>\n        </div>\n        <span class=\"select-icon\" @click=\"payWay = 1\" :class=\"{choosed: payWay == 1}\">√</span>\n      </section>\n      <section class=\"pay_item\">\n        <div class=\"pay_icon_contaienr\">\n          <span class=\"weixin pay_icon\"></span>\n          <span>微信</span>\n        </div>\n        <span class=\"select-icon\" @click=\"payWay = 2\" :class=\"{choosed: payWay == 2}\">√</span>\n      </section>\n    </section>\n    <p class=\"determine\" @click=\"confrimPay\">确认支付</p>\n    <alert-tip v-if=\"showAlert\" @closeTip=\"closeTipFun\" :alertText=\"alertText\"></alert-tip>\n  </div>\n</template>\n\n<script>\n  import headTop from '@/components/header/head'\n  import {mapState, mapMutations} from 'vuex'\n  import {payRequest} from '@/service/getData'\n  import alertTip from '@/components/common/alertTip'\n\n  export default {\n    data(){\n      return{\n        payDetail: false, //付款信息详情\n        showAlert: false,\n        alertText: null,\n        payWay: 1, //付款方式\n        countNum: 900, //倒计时15分钟\n        gotoOrders: false, //去付款\n      }\n    },\n    components: {\n      headTop,\n      alertTip,\n    },\n    created(){\n      this.initData();\n      //清除购物车中当前商铺的信息\n      if (this.shopid) {\n        this.CLEAR_CART(this.shopid);\n      }\n    },\n    mounted(){\n      this.remainingTime();\n    },\n    beforeDestroy(){\n      clearInterval(this.timer);\n    },\n    props:[],\n    computed: {\n      ...mapState([\n        'orderMessage', 'userInfo', 'shopid', 'cartPrice'\n      ]),\n      //时间转换\n      remaining: function (){\n        let minute = parseInt(this.countNum/60);\n        if (minute < 10) {\n          minute = '0' + minute;\n        }\n        let second = parseInt(this.countNum%60);\n        if (second < 10) {\n          second = '0' + second;\n        }\n        return '00 : ' + minute + ' : ' + second;\n      }\n    },\n    methods: {\n      ...mapMutations([\n        'CONFIRM_INVOICE', 'CLEAR_CART'\n      ]),\n      //初始化信息\n      async initData(){\n        this.payDetail = await payRequest(this.orderMessage.order_id, this.userInfo.user_id);\n        if (this.payDetail.message) {\n          this.showAlert = true;\n          this.alertText = this.payDetail.message;\n          return\n        }\n      },\n      //倒计时\n      remainingTime(){\n        clearInterval(this.timer);\n        this.timer = setInterval(() => {\n          this.countNum --;\n          if (this.countNum == 0) {\n            this.showAlert = true;\n            this.alertText = '支付超时';\n          }\n        }, 1000);\n      },\n      //确认付款\n      confrimPay(){\n        this.showAlert = true;\n        this.alertText = '当前环境无法支付，请打开官方APP进行付款';\n        this.gotoOrders = true;\n      },\n      //关闭提示框，跳转到订单列表页\n      closeTipFun(){\n        this.showAlert = false;\n        if (this.gotoOrders) {\n          this.$router.push('/order');\n        }\n      },\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '@/../static/style/mixin';\n\n  .select-icon {\n    display: inline-block;\n    padding: 4px;\n    background-color: #ccc;\n    box-sizing: content-box;\n    line-height: 18px;\n    font-weight: bold;\n    text-align: center;\n\n    @include wh(18px,18px);\n    @include sc(16px,#fff);\n    @include borderRadius(50%);\n  }\n  .choosed {\n    background-color: #4cd964!important;\n  }\n  .pay_icon {\n    display: inline-block;\n    margin-right: 8px;\n\n    @include wh(46px, 46px);\n  }\n  .zhifubao{\n    @include bis('../../../../static/images/common/zhifubao.svg');\n  }\n  .weixin {\n    @include bis('../../../../static/images/common/weixin.svg');\n  }\n\n  .rating_page{\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #f5f5f5;\n    z-index: 204;\n    padding-top: 46px;\n    p, span{\n      font-family: Helvetica Neue,Tahoma,Arial;\n    }\n  }\n  .show_time_amount{\n    background-color: #fff;\n    padding: 16px;\n    text-align: center;\n    .time_last{\n      @include sc(15px, #666);\n      margin-top: 24px;\n    }\n    .time{\n      @include sc(36px, #333);\n      margin: 8px 0 24px;\n    }\n    .order_detail{\n      @include fj;\n      span{\n        @include sc(16px, #666);\n      }\n      span:nth-of-type(2){\n        color: #ff6000;\n        font-weight: bold;\n      }\n    }\n  }\n  .pay_way{\n    background-color: #f1f1f1;\n    padding: 0 16px;\n    @include sc(16px, #666);\n    line-height: 42px;\n  }\n  .pay_way_list{\n    background-color: #fff;\n    .pay_item{\n      padding: 10px 14px;\n      @include fj;\n      align-items: center;\n      line-height: 62px;\n      border-bottom: 1px solid #f5f5f5;\n      .pay_icon_contaienr{\n        @include fj;\n        align-items: center;\n\n        span{\n          @include sc(16px, #666);\n        }\n      }\n    }\n  }\n  .determine{\n    background-color: #4cd964;\n    @include sc(16px, #fff);\n    text-align: center;\n    margin: 0 16px;\n    line-height: 42px;\n    border-radius: 5px;\n    margin-top: 12px;\n    font-weight: bold;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/confirmOrder/children/payment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rating_page\"},[_c('head-top',{attrs:{\"head-title\":\"在线支付\",\"go-back\":\"true\"}}),_vm._v(\" \"),_c('section',{staticClass:\"show_time_amount\"},[_c('section',[_c('header',{staticClass:\"time_last\"},[_vm._v(\"支付剩余时间\")]),_vm._v(\" \"),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.remaining))]),_vm._v(\" \"),(_vm.payDetail.resultData)?_c('footer',{staticClass:\"order_detail\"},[_c('span',[_vm._v(\"详情\")]),_vm._v(\" \"),_c('span',[_vm._v(\"¥ \"+_vm._s(_vm.cartPrice&&_vm.cartPrice.toFixed(2) || _vm.payDetail.resultData.orderInfo.orderAmount&&(_vm.payDetail.resultData.orderInfo.orderAmount/100).toFixed(2)))])]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"pay_way\"},[_vm._v(\"选择支付方式\")]),_vm._v(\" \"),_c('section',{staticClass:\"pay_way_list\"},[_c('section',{staticClass:\"pay_item\"},[_vm._m(0),_vm._v(\" \"),_c('span',{staticClass:\"select-icon\",class:{choosed: _vm.payWay == 1},on:{\"click\":function($event){_vm.payWay = 1}}},[_vm._v(\"√\")])]),_vm._v(\" \"),_c('section',{staticClass:\"pay_item\"},[_vm._m(1),_vm._v(\" \"),_c('span',{staticClass:\"select-icon\",class:{choosed: _vm.payWay == 2},on:{\"click\":function($event){_vm.payWay = 2}}},[_vm._v(\"√\")])])]),_vm._v(\" \"),_c('p',{staticClass:\"determine\",on:{\"click\":_vm.confrimPay}},[_vm._v(\"确认支付\")]),_vm._v(\" \"),(_vm.showAlert)?_c('alert-tip',{attrs:{\"alertText\":_vm.alertText},on:{\"closeTip\":_vm.closeTipFun}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pay_icon_contaienr\"},[_c('span',{staticClass:\"zhifubao pay_icon\"}),_vm._v(\" \"),_c('span',[_vm._v(\"支付宝\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pay_icon_contaienr\"},[_c('span',{staticClass:\"weixin pay_icon\"}),_vm._v(\" \"),_c('span',[_vm._v(\"微信\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-96230e8a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/confirmOrder/children/payment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-96230e8a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./payment.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./payment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./payment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-96230e8a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./payment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-96230e8a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/confirmOrder/children/payment.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}