{"version":3,"sources":["webpack:///src/page/confirmOrder/children/userValidation.vue","webpack:///./src/page/confirmOrder/children/userValidation.vue?1821","webpack:///./src/page/confirmOrder/children/userValidation.vue"],"names":["userValidation","data","validate","countDown","sigs","reCallVerify","showAlert","alertText","showVoiceTip","type","components","headTop","head","alertTip","created","this","$route","query","sig","mounted","count","getData","beforeDestroy","clearInterval","timer","props","computed","extends_default","Object","vuex_esm","methods","_this","setInterval","recall","sendVoice","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","service_getData","cart_id","sent","message","stop","confrimOrder","_this3","_callee2","orderRes","_context2","CHANGE_ORDER_PARAM","validation_code","validation_token","validate_token","orderParam","abrupt","ORDER_SUCCESS","$router","push","children_userValidation","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","head-title","go-back","_v","_m","_e","on","click","directives","name","rawName","value","expression","placeholder","maxlength","domProps","input","$event","target","composing","_s","closeTip","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/32.ff8cf5e6f3d90d31c3d7.js","sourcesContent":["<template>\n  <div class=\"validation_page\">\n    <head-top head-title=\"用户手机验证\" go-back='true'></head-top>\n    <section class=\"validataion_container\">\n      <div class=\"voice_tip\" v-if=\"showVoiceTip\">\n        <p>电话拨打中...</p>\n        <p>请留意来自 <span>10105757</span> 或者 <span>021-315754XX</span> 的电话</p>\n      </div>\n      <header class=\"validataion_header\">\n        <span>收不到短信？使用</span>\n        <span @click=\"sendVoice\">语音验证码</span>\n      </header>\n      <form class=\"input_form\">\n        <input type=\"text\" name=\"validate\" v-model=\"validate\" placeholder=\"验证码\" maxlength=\"6\">\n        <span class=\"disable\" v-if=\"countDown\">{{countDown}} S</span>\n        <span class=\"repost\" v-else @click=\"recall\">重新发送</span>\n      </form>\n    </section>\n    <div class=\"determine\" @click=\"confrimOrder\">确定</div>\n    <alert-tip v-if=\"showAlert\" @closeTip=\"showAlert = false\" :alertText=\"alertText\"></alert-tip>\n  </div>\n</template>\n\n<script>\n  import headTop from '@/components/header/head'\n  import {mapState, mapMutations} from 'vuex'\n  import {rePostVerify, validateOrders} from '@/service/getData'\n  import alertTip from '@/components/common/alertTip'\n\n  export default {\n    data(){\n      return{\n        validate: null, //验证码\n        countDown: 60, //倒计时\n        sigs: null, //sig值\n        reCallVerify: null, //重发验证信息\n        showAlert: false,\n        alertText: null,\n        showVoiceTip: false, //显示语音验证\n        type: 'sms',\n      }\n    },\n    components: {\n      headTop,\n      alertTip,\n    },\n    created(){\n      if (this.$route.query.sig) {\n        this.sigs = this.$route.query.sig;\n      } else {\n        this.sigs = this.sig;\n      }\n    },\n    mounted(){\n      this.count();\n      this.getData();\n    },\n    beforeDestroy(){\n      clearInterval(this.timer);\n    },\n    props:[],\n    computed: {\n      ...mapState([\n        'needValidation', 'cart_id', 'sig', 'orderParam'\n      ]),\n    },\n    methods: {\n      ...mapMutations([\n        'CHANGE_ORDER_PARAM', 'ORDER_SUCCESS'\n      ]),\n      //到计时\n      count(){\n        this.countDown = 60;\n        clearInterval(this.timer);\n        this.timer = setInterval(() => {\n          this.countDown -- ;\n          if (this.countDown == 0) {\n            clearInterval(this.timer);\n          }\n        }, 1000);\n      },\n      //重新发送\n      recall(){\n        this.count();\n        this.type = 'sms';\n        this.getData();\n      },\n      //发送语音验证\n      sendVoice(){\n        this.showVoiceTip = true;\n        this.type = 'voice';\n        this.getData();\n      },\n      //获取验证信息\n      async getData(){\n        this.reCallVerify = await rePostVerify(this.cart_id, this.sigs, this.type);\n        if (this.reCallVerify.message) {\n          this.showAlert = true;\n          this.alertText = this.reCallVerify.message;\n        }\n      },\n      //确认订单\n      async confrimOrder(){\n        this.CHANGE_ORDER_PARAM({validation_code: this.validate, validation_token: this.reCallVerify.validate_token})\n        let orderRes = await validateOrders(this.orderParam);\n        //如果信息错误则提示，否则进入付款页面\n        if (orderRes.message) {\n          this.showAlert = true;\n          this.alertText = orderRes.message;\n          return\n        }\n        this.ORDER_SUCCESS(orderRes);\n        this.$router.push('/confirmOrder/payment');\n      },\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '@/../static/style/mixin';\n\n  .validation_page{\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #f5f5f5;\n    z-index: 204;\n    padding-top: 46px;\n    p, span, input{\n      font-family: Helvetica Neue,Tahoma,Arial;\n    }\n  }\n  .determine{\n    background-color: #4cd964;\n    @include sc(16px, #fff);\n    text-align: center;\n    margin: 0 16px;\n    line-height: 42px;\n    border-radius: 5px;\n    margin-top: 12px;\n  }\n  .validataion_container{\n    background-color: #fff;\n    padding: 16px;\n    .validataion_header{\n      span{\n        @include sc(16px, #333);\n      }\n      span:nth-of-type(2){\n        color: #ff6000;\n      }\n    }\n  }\n  .input_form{\n    display: flex;\n    padding: 16px 0;\n    *{\n      @include sc(16px, #666);\n      border-radius: 3px;\n    }\n    input{\n      flex: 3;\n      height: 35px;\n      background-color: #eee;\n      margin-right: 18px;\n      padding: 0 14px;\n    }\n    span{\n      flex: 1;\n      height: 35px;\n      display: inline-block;\n      text-align: center;\n      line-height: 35px;\n      font-size: 14px;\n    }\n    .repost{\n      background-color: $blue;\n      color: #fff;\n    }\n    .disable{\n      background-color: #eee;\n      color: #999;\n    }\n  }\n  .voice_tip{\n    margin-bottom: 10px;\n    p{\n      @include sc(15px, #333);\n      line-height: 24px;\n      span{\n        color: #ff6000;\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/confirmOrder/children/userValidation.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"validation_page\"},[_c('head-top',{attrs:{\"head-title\":\"用户手机验证\",\"go-back\":\"true\"}}),_vm._v(\" \"),_c('section',{staticClass:\"validataion_container\"},[(_vm.showVoiceTip)?_c('div',{staticClass:\"voice_tip\"},[_c('p',[_vm._v(\"电话拨打中...\")]),_vm._v(\" \"),_vm._m(0)]):_vm._e(),_vm._v(\" \"),_c('header',{staticClass:\"validataion_header\"},[_c('span',[_vm._v(\"收不到短信？使用\")]),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.sendVoice}},[_vm._v(\"语音验证码\")])]),_vm._v(\" \"),_c('form',{staticClass:\"input_form\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.validate),expression:\"validate\"}],attrs:{\"type\":\"text\",\"name\":\"validate\",\"placeholder\":\"验证码\",\"maxlength\":\"6\"},domProps:{\"value\":(_vm.validate)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.validate=$event.target.value}}}),_vm._v(\" \"),(_vm.countDown)?_c('span',{staticClass:\"disable\"},[_vm._v(_vm._s(_vm.countDown)+\" S\")]):_c('span',{staticClass:\"repost\",on:{\"click\":_vm.recall}},[_vm._v(\"重新发送\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"determine\",on:{\"click\":_vm.confrimOrder}},[_vm._v(\"确定\")]),_vm._v(\" \"),(_vm.showAlert)?_c('alert-tip',{attrs:{\"alertText\":_vm.alertText},on:{\"closeTip\":function($event){_vm.showAlert = false}}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"请留意来自 \"),_c('span',[_vm._v(\"10105757\")]),_vm._v(\" 或者 \"),_c('span',[_vm._v(\"021-315754XX\")]),_vm._v(\" 的电话\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5024fefc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/confirmOrder/children/userValidation.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5024fefc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./userValidation.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userValidation.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userValidation.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5024fefc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./userValidation.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5024fefc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/confirmOrder/children/userValidation.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}